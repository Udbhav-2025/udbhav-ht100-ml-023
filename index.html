<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Story Generator</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="light-theme">

    <div class="bg-overlay"></div>

    <section id="auth-section">
        <div class="glass-container auth-box">
            
            <div id="login-form">
                <h2>Login</h2>
                <input type="text" id="login-email" placeholder="Gmail ID">
                <input type="password" id="login-pass" placeholder="Password">
                <button onclick="handleLogin()">Log In</button>
                <p class="link-text" onclick="showForgotPass()">Forgot Password?</p>
                <p class="link-text">New here? <span onclick="toggleAuth('signup')">Sign Up</span></p>
            </div>

            <div id="signup-form" class="hidden">
                <h2>Sign Up</h2>
                <input type="text" id="signup-user" placeholder="Username">
                <input type="email" id="signup-email" placeholder="Gmail ID">
                <input type="password" id="signup-pass" placeholder="Password">
                <button onclick="handleSignup()">Sign Up</button>
                <p class="link-text">Existing user? <span onclick="toggleAuth('login')">Log In</span></p>
            </div>

            <div id="forgot-flow" class="hidden">
                <h2>Reset Password</h2>
                
                <div id="fp-step-1">
                    <input type="email" id="fp-email" placeholder="Enter Gmail ID">
                    <button onclick="sendOTP()">Send OTP</button>
                </div>

                <div id="fp-step-2" class="hidden">
                    <input type="text" id="fp-otp" placeholder="Enter OTP">
                    <button onclick="verifyOTP()">Verify OTP</button>
                    <p class="link-text" onclick="resendOTP()">Resend OTP</p>
                </div>

                <div id="fp-step-3" class="hidden">
                    <input type="password" id="fp-new-pass" placeholder="New Password">
                    <button onclick="resetPasswordFinal()">Change Password</button>
                </div>
                
                <p class="link-text" onclick="toggleAuth('login')">Back to Login</p>
            </div>
        </div>
    </section>

    <section id="main-app" class="hidden">
        
        <nav>
            <div class="menu-btn" onclick="toggleMenu()"><i class="fas fa-bars"></i></div>
            <div class="profile-icon" onclick="toggleProfile()"><i class="fas fa-user-circle"></i></div>
        </nav>

        <div id="side-menu" class="sidebar">
            <a href="#" onclick="showPage('home')">Home</a>
            <a href="#" onclick="showPage('history')">History</a>
            <a href="#" onclick="openSettings()">Settings</a>
            <span class="close-btn" onclick="toggleMenu()">&times;</span>
        </div>

        <div id="profile-modal" class="modal hidden">
            <div class="modal-content profile-view">
                <img src="https://via.placeholder.com/100" id="profile-pic-display" class="circle-img">
                <h3 id="display-username">User ID</h3>
                <p id="display-email">user@gmail.com</p>
                <button onclick="handleLogout()" class="logout-btn">Log Out</button>
                <button onclick="toggleProfile()">Close</button>
            </div>
        </div>

        <div id="settings-modal" class="modal hidden">
            <div class="modal-content">
                <h2>Settings</h2>
                
                <div class="setting-item">
                    <label>Theme</label>
                    <select id="theme-select" onchange="changeTheme()">
                        <option value="light">Light</option>
                        <option value="dark">Dark</option>
                    </select>
                </div>

                <div class="setting-item">
                    <label>Change Password</label>
                    <input type="password" placeholder="Old Password">
                    <input type="password" placeholder="New Password">
                    <button>Update</button>
                </div>

                <div class="setting-item">
                    <label>Edit User ID</label>
                    <input type="text" placeholder="New User ID">
                </div>

                <div class="setting-item">
                    <label>Edit Profile Photo</label>
                    <input type="file">
                </div>

                <div class="setting-item">
                    <label>Font Family</label>
                    <select id="font-select" onchange="changeFont()">
                        <option value="'Segoe UI', sans-serif">Default</option>
                        <option value="'Courier New', monospace">Courier</option>
                        <option value="'Georgia', serif">Georgia</option>
                        <option value="'Verdana', sans-serif">Verdana</option>
                        <option value="'Impact', sans-serif">Impact</option>
                    </select>
                </div>

                <div class="setting-item">
                    <label>Zoom Text</label>
                    <input type="range" min="12" max="24" value="16" oninput="changeZoom(this.value)">
                </div>

                <button onclick="closeSettings()">Close Settings</button>
            </div>
        </div>

        <div id="upload-page" class="content-area">
            <div class="glass-container">
                <h2>Create Your Story</h2>
                
                <div class="upload-box">
                    <label for="file-upload" class="custom-upload">
                        <i class="fas fa-cloud-upload-alt"></i> Upload Photos (Max 10)
                    </label>
                    <input id="file-upload" type="file" multiple accept="image/*" onchange="handleFiles()">
                </div>
                <div id="preview-area"></div>

                <div class="emotion-section">
                    <label>Choose Emotion:</label>
                    <select id="emotion-select" onchange="checkEmotion()">
                        <option value="" disabled selected>Select...</option>
                        <option value="joyful">Joyful</option>
                        <option value="exciting">Exciting</option>
                        <option value="sarcasm">Sarcasm</option>
                        <option value="depressed">Depressed</option>
                        <option value="calm">Calm</option>
                        <option value="scared">Scared</option>
                        <option value="angry">Angry</option>
                    </select>
                </div>

                <button id="generate-btn" class="primary-btn" disabled onclick="generateStory()">
                    Generate Audio Book
                </button>
            </div>
        </div>

        <div id="audio-page" class="content-area hidden">
            <div class="glass-container">
                <h2>AI Generated Story</h2>
                
                <textarea id="story-text" readonly></textarea>
                
                <div class="audio-controls">
                    <p>AI Narrator (ElevenLabs)</p>
                    <audio id="audio-player" controls src=""></audio>
                    <div class="edit-audio">
                        <button>Trim Audio</button>
                        <label>Speed:</label>
                        <select onchange="changeSpeed(this.value)">
                            <option value="1">1x</option>
                            <option value="1.5">1.5x</option>
                            <option value="2">2x</option>
                        </select>
                    </div>
                </div>

                <button class="primary-btn" onclick="convertToVideo()">Convert to Video (AI)</button>
            </div>
        </div>

        <div id="video-page" class="content-area hidden">
            <div class="glass-container">
                <h2>Your AI Video</h2>
                <div class="video-placeholder">
                    <i class="fas fa-film"></i>
                    <p>Video generated by Runway Gen-2</p>
                </div>
                <div class="action-buttons">
                    <button onclick="downloadVideo()">Download Video</button>
                    <button onclick="showPage('upload')">New Page</button>
                    <button onclick="showPage('audio')">Go Back</button>
                </div>
            </div>
        </div>
        
        <div id="history-page" class="content-area hidden">
            <div class="glass-container">
                <h2>History</h2>
                <p>Previous uploads will appear here.</p>
                <ul id="history-list"></ul>
            </div>
        </div>

    </section>

    <script src="script.js"></script>
</body>
</html>